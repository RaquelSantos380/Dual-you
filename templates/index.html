{% extends "base.html" %}

{% block content %}
<div class="header-batalha">
    <h1>âš”ï¸ A Batalha DiÃ¡ria - {{ dia }}</h1>
</div>

<!-- Placar -->
<div class="placar">
    <div class="jogador robo">
        <div class="jogador-icon">ğŸ‘¥</div>
        <div class="jogador-info">
            <h3>Alter Ego</h3>
            <div class="pontos">{{ pontos_robo }} pts</div>
        </div>
    </div>
    
    <div class="versus">VS</div>
    
    <div class="jogador humano">
        <div class="jogador-icon">ğŸ‘¤</div>
        <div class="jogador-info">
            <h3>VocÃª</h3>
            <div class="pontos">{{ pontos_usuario }} pts</div>
        </div>
    </div>
</div>

<!-- Mensagem de diferenÃ§a -->
<div class="diferenca {% if diferenca >= 0 %}positiva{% else %}negativa{% endif %}">
    {% if diferenca > 0 %}
        ğŸ‰ VocÃª estÃ¡ {{ diferenca }} pontos na frente! Mandou bem!
    {% elif diferenca < 0 %}
        âš”ï¸ VocÃª estÃ¡ {{ -diferenca }} pontos atrÃ¡s. Vamos lÃ¡!
    {% else %}
        ğŸ¤ Empate tÃ©cnico! Hora de virar o jogo!
    {% endif %}
</div>

<!-- Tarefas do dia -->
<div class="tarefas-container">
    <h2>Tarefas de Hoje</h2>
    
    <div class="colunas-tarefas">
        <!-- Coluna do RobÃ´ -->
        <div class="coluna robo-coluna">
            <h3>ğŸ‘¥ Alter Ego</h3>
            <div class="tarefas-lista">
                {% for tarefa in tarefas %}
                    <div class="tarefa-item concluida">
                        <span class="check">âœ…</span>
                        <span class="descricao">{{ tarefa.tarefa.descricao }}</span>
                        <span class="pontos-tarefa">+15 pts</span>
                        {% if tarefa.tarefa.extra %}
                            <span class="badge-extra">Extra</span>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
        
        <!-- Coluna do Humano -->
        <div class="coluna humano-coluna">
            <h3>ğŸ‘¤ Suas Tarefas</h3>
            <div class="tarefas-lista">
                {% for tarefa in tarefas %}
                    <div class="tarefa-item {% if tarefa.concluida %}concluida{% endif %}">
                        {% if tarefa.concluida %}
                            <span class="check">âœ…</span>
                        {% else %}
                            <form action="{{ url_for('concluir_tarefa', tarefa_dia_id=tarefa.id) }}" method="post" class="tarefa-form">
                                <button type="submit" class="check-btn">
                                    â¬œ
                                </button>
                            </form>
                        {% endif %}
                        <span class="descricao">{{ tarefa.tarefa.descricao }}</span>
                        <span class="pontos-tarefa">+15 pts</span>
                        {% if tarefa.tarefa.extra %}
                            <span class="badge-extra">Extra</span>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}