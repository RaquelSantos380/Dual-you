{% extends "base.html" %}

{% block content %}
<div class="header-planejamento">
    <h1>ðŸ“… Planejamento Semanal</h1>
    <p>Adicione tarefas fixas para cada dia da semana</p>
</div>

<!-- Dias da semana -->
<div class="dias-semana">
    <div class="dia-card" onclick="mostrarFormDia('Segunda-feira')">
        <h3>Segunda</h3>
    </div>
    <div class="dia-card" onclick="mostrarFormDia('TerÃ§a-feira')">
        <h3>TerÃ§a</h3>
    </div>
    <div class="dia-card" onclick="mostrarFormDia('Quarta-feira')">
        <h3>Quarta</h3>
    </div>
    <div class="dia-card" onclick="mostrarFormDia('Quinta-feira')">
        <h3>Quinta</h3>
    </div>
    <div class="dia-card" onclick="mostrarFormDia('Sexta-feira')">
        <h3>Sexta</h3>
    </div>
    <div class="dia-card" onclick="mostrarFormDia('SÃ¡bado')">
        <h3>SÃ¡bado</h3>
    </div>
    <div class="dia-card" onclick="mostrarFormDia('Domingo')">
        <h3>Domingo</h3>
    </div>
</div>

<!-- FormulÃ¡rio para adicionar tarefa -->
<div id="form-tarefa-dia" class="form-tarefa-dia" style="display: none;">
    <h3>Adicionar Tarefa para <span id="dia-selecionado"></span></h3>
    <form action="{{ url_for('adicionar_tarefa_fixa') }}" method="post">
        <input type="hidden" name="dia_semana" id="dia-input">
        <input type="text" name="descricao" placeholder="Digite a tarefa..." required>
        <button type="submit" class="btn-confirmar">Adicionar</button>
        <button type="button" class="btn-cancelar" onclick="esconderFormDia()">Cancelar</button>
    </form>
</div>

<!-- Lista de tarefas da semana -->
<div class="tarefas-semana">
    <h2>Tarefas Fixas por Dia</h2>
    
    {% set dias = ['Segunda-feira', 'TerÃ§a-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'SÃ¡bado', 'Domingo'] %}
    
    {% for dia in dias %}
        <div class="dia-tarefas">
            <h3>{{ dia }}</h3>
            <div class="tarefas-lista">
                {% for tarefa in tarefas_por_dia[dia] %}
                    <div class="tarefa-item-planejamento">
                        <span>{{ tarefa.descricao }}</span>
                    </div>
                {% else %}
                    <p class="sem-tarefas">Nenhuma tarefa fixa</p>
                {% endfor %}
            </div>
        </div>
    {% endfor %}
    
    <!-- Tarefas Extras -->
    <div class="dia-tarefas" style="margin-top: 30px; background: linear-gradient(135deg, #f9f9f9 0%, #f0f0f0 100%);">
        <h3>âœ¨ Tarefas Extras</h3>
        <div class="tarefas-lista">
            {% for tarefa in tarefas_extra %}
                <div class="tarefa-item-planejamento">
                    <span>{{ tarefa.descricao }}</span>
                    <span class="badge-extra">Extra</span>
                </div>
            {% else %}
                <p class="sem-tarefas">Nenhuma tarefa extra</p>
            {% endfor %}
        </div>
        
        <!-- BotÃ£o adicionar tarefa extra -->
        <div class="tarefa-extra">
            <button class="btn-extra" onclick="mostrarFormExtra()">+ Adicionar Tarefa Extra</button>
            
            <div id="form-extra" class="form-extra" style="display: none;">
                <form action="{{ url_for('adicionar_tarefa_extra') }}" method="post">
                    <input type="text" name="descricao" placeholder="Digite sua tarefa extra..." required>
                    <button type="submit" class="btn-confirmar">Adicionar</button>
                    <button type="button" class="btn-cancelar" onclick="esconderFormExtra()">Cancelar</button>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- BotÃ£o reset -->
<div class="acoes">
    <form action="{{ url_for('resetar_tarefas') }}" method="post" class="form-reset">
        <button type="submit" class="btn-reset" onclick="return confirm('Tem certeza? Isso vai apagar TODAS as tarefas!')">
            ðŸ”„ Resetar Tudo
        </button>
    </form>
</div>

<script>
function mostrarFormDia(dia) {
    document.getElementById('dia-selecionado').textContent = dia;
    document.getElementById('dia-input').value = dia;
    document.getElementById('form-tarefa-dia').style.display = 'block';
}

function esconderFormDia() {
    document.getElementById('form-tarefa-dia').style.display = 'none';
}

function mostrarFormExtra() {
    document.getElementById('form-extra').style.display = 'block';
}

function esconderFormExtra() {
    document.getElementById('form-extra').style.display = 'none';
}
</script>
{% endblock %}